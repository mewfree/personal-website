<!doctype html><html lang="en"><head><title>Google Ads Scripts: Programmatically Create Ads - Damien Gonot</title><link rel="stylesheet" href="/main.css"><link rel="stylesheet" href="/katex.min.css"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="How to create entities from Google Ads scripts

Today I‚Äôm going to introduce a new concept from Google Ads scripts:
Builders! For reasons unknown to me, builders are available for ad
groups, keywords and ads but not campaigns‚Ä¶ Though I might share a few
tricks with you later on how to circumvent ..."><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body class="bg-white dark:bg-black"><header class="bg-indigo-600 dark:bg-black text-center text-white p-8"><div class="text-4xl font-bold mb-4">Damien Gonot</div><div class="text-xl flex flex-wrap space-x-8 justify-center"><a href="/" class="hover:underline">Home</a> <a href="/blog" class="hover:underline">Blog</a> <a href="/notes" class="hover:underline">Notes</a> <a href="/about" class="hover:underline">About</a> <button id="theme" class="text-2xl hover:cursor-pointer hover:dark" onclick="toggleTheme()">üåù</button></div><script src="/custom.js"></script><script src="/highlight.js"></script><script defer="defer" src="/katex.min.js"></script><script defer="defer" src="/katex-auto-render.min.js"></script></header><div class="prose prose-indigo dark:prose-invert dark:prose-a:text-indigo-400 max-w-3xl mx-auto p-8"><h1 class="text-center">Google Ads Scripts: Programmatically Create Ads</h1><div class="text-center">written on 2018-04-20</div><h2 id="how-to-create-entities-from-google-ads-scripts">How to create entities from Google Ads scripts</h2><p>Today I‚Äôm going to introduce a new concept from Google Ads scripts: <code>Builders</code>! For reasons unknown to me, builders are available for ad groups, keywords and ads but not campaigns‚Ä¶ Though I might share a few tricks with you later on how to circumvent that üòâ.</p><p><strong>For the purpose of this tutorial, let‚Äôs say we own bike repair shops in every major city in the United States and want to automatically generate ads for every single repair shop.</strong></p><p>Let‚Äôs start off with a new script. I‚Äôll personally call it ‚Äúnew US cities‚Äù.</p><h2 id="building-the-ad-groups">Building the ad groups</h2><p>To create a new ad group, you need to first select a campaign. Campaigns can be selected by ID or by campaign name.</p><p>I went ahead and manually created a new search campaign called <code>united_states-cities</code> as Google Ads won‚Äôt allow us to create a campaign through Google Ads scripts yet. You can also use an existing campaign.</p><p>If you know the ID of your campaign (you can add <code>campaign ID</code> as a column in the Google Ads interface) then that is the safest way to select a campaign while being sure you‚Äôre not selecting anything else (which might happen if you have campaigns with similar names).</p><div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> campaign <span class="op">=</span> AdsApp<span class="op">.</span><span class="fu">campaigns</span>()</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withIds</span>([<span class="dv">1374655888</span>])</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">get</span>()</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">next</span>()<span class="op">;</span></span></code></pre></div><p>Selecting a campaign by name (less safe but more human-friendly):</p><div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> campaign <span class="op">=</span> AdsApp<span class="op">.</span><span class="fu">campaigns</span>()</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withCondition</span>(<span class="st">&quot;Name = &#39;united_states-cities&#39;&quot;</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withLimit</span>(<span class="dv">1</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">get</span>()</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">next</span>()<span class="op">;</span></span></code></pre></div><p>I threw a <code>.withLimit(1)</code> in there just to be sure we‚Äôre only selecting one campaign.</p><p>Once we‚Äôve selected the campaign in which we want to create our new ad groups, this is how adding a new ad group is done:</p><div class="sourceCode" id="cb3"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> campaign <span class="op">=</span> AdsApp<span class="op">.</span><span class="fu">campaigns</span>()</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withCondition</span>(<span class="st">&quot;Name = &#39;united_states-cities&#39;&quot;</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withLimit</span>(<span class="dv">1</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">get</span>()</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">next</span>()<span class="op">;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a> <span class="kw">var</span> adGroupBuilder <span class="op">=</span> campaign<span class="op">.</span><span class="fu">newAdGroupBuilder</span>()<span class="op">;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a> adGroupOperation <span class="op">=</span> adGroupBuilder</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withName</span>(<span class="st">&#39;Ad group name&#39;</span>)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withStatus</span>(<span class="st">&#39;PAUSED&#39;</span>)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">build</span>()<span class="op">;</span></span></code></pre></div><p>I added <code>.withStatus('PAUSED')</code> as a safety measure to make sure we have time to review what we create before going live!</p><p>If you preview the above script in your <code>main()</code> function, for the first time you should see something in the CHANGES section: <img src="/images/ag_builder_preview.png" alt="ad group builder preview"></p><p>As always, this is what our Google Ads Script would do if it was actually run.</p><p>As a fake bike repair shop owner for the purpose of this tutorial, I have a list of cities where my shops are located that I want to advertise on Google Search. Lists (called arrays in JavaScript) are defined this way: <code>var cities = ['New York City', 'Los Angeles', 'Chicago', 'Houston', 'Philadelphia'];</code></p><p>It is also possible to read such a list from a Google Spreadsheet but I‚Äôll leave that for another tutorial üòâ.</p><p>We‚Äôd probably want to create an ad group for each of those cities:</p><div class="sourceCode" id="cb4"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> campaign <span class="op">=</span> AdsApp<span class="op">.</span><span class="fu">campaigns</span>()</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withCondition</span>(<span class="st">&quot;Name = &#39;united_states-cities&#39;&quot;</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withLimit</span>(<span class="dv">1</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">get</span>()</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">next</span>()<span class="op">;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> adGroupBuilder <span class="op">=</span> campaign<span class="op">.</span><span class="fu">newAdGroupBuilder</span>()<span class="op">;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> cities <span class="op">=</span> [<span class="st">&#39;New York City&#39;</span><span class="op">,</span> <span class="st">&#39;Los Angeles&#39;</span><span class="op">,</span> <span class="st">&#39;Chicago&#39;</span><span class="op">,</span> <span class="st">&#39;Houston&#39;</span><span class="op">,</span> <span class="st">&#39;Philadelphia&#39;</span>]<span class="op">;</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  cities<span class="op">.</span><span class="fu">forEach</span>(<span class="kw">function</span>(city) {</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    adGroupBuilder</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withName</span>(city)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withStatus</span>(<span class="st">&#39;PAUSED&#39;</span>)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">build</span>()<span class="op">;</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span></code></pre></div><p>Now, that is all fine and dandy, but if you like standardization like me, you‚Äôll want to have ad groups that are more computer-readable, so for example, having <code>new_york_city</code> instead of <code>New York City</code> as an ad group name. We can simply lowercase the name and replace spaces with underscores (<code>city.toLowerCase().replace(/ /g, '_')</code>). <img src="/images/ag_builder_cities_preview.png" alt="ad group builder cities preview"></p><h2 id="section">üôå</h2><h2 id="adding-keywords-to-our-ad-groups">Adding keywords to our ad groups</h2><p>Keywords are built using the same technique as ad groups but with some specificities as keywords also hold a bid (usually CPC) and a URL if not set at the ad level.</p><div class="sourceCode" id="cb5"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a> <span class="kw">var</span> keywordOperation <span class="op">=</span> adGroup<span class="op">.</span><span class="fu">newKeywordBuilder</span>()</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withText</span>(<span class="st">&#39;keyword&#39;</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withCpc</span>(<span class="fl">0.5</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withFinalUrl</span>(<span class="st">&#39;https://www.example.com&#39;</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">build</span>()<span class="op">;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a> <span class="kw">var</span> keyword <span class="op">=</span> keywordOperation<span class="op">.</span><span class="fu">getResult</span>()<span class="op">;</span></span></code></pre></div><p>We have a few different ways to add keywords to the ad groups we previously created. After each ad group is created, we can add the keywords directly, or we can wait for all ad groups to be created before selecting them and adding all the keywords at the same time.</p><p>I chose to follow the first solution but anything is possible!</p><p>First, we‚Äôll need to modify our previous script a bit to get the ‚Äúresult‚Äù (the newly created ad group) back through <code>.getResult()</code>. Afterwards, we‚Äôll need to decide what keywords we want to add. It is a good idea to use broad match modifiers (sometimes shortened as BMM) as Google Ads might be a bit overzealous with regular broad match keywords. Here is a short list using Chicago as an example: - +bike +repair +chicago - +bike +repair +shop +chicago - +bike +shop +chicago</p><p>Some keywords may overlap but we‚Äôre going to maximize our Quality Score and win the most CPC bids this way.</p><p>Doesn‚Äôt sound too complicated, except a lot of American city names include spaces (and I‚Äôm not even talking about French city names that can be hyphenated like Aix-en-Provence in France or Saint-J√©r√¥me in Qu√©bec) but I have a trick to handle that. By prepending <code>+</code> before our keyword and replacing every space by <code>[space]+</code>, we should have our broad match modifier keyword.</p><p>Example: <code>Logger.log('+' + 'bike repair Chicago'.replace(/ /g, ' +'));</code> gets us <code>+bike +repair +chicago</code>!</p><p>I don‚Äôt want to repeat myself so I‚Äôll put my list of keywords in a list that can be iterated on.</p><p>Also note that I won‚Äôt include the entire code every time and will replace missing bits by ‚Äú(‚Ä¶)‚Äù. I will include a full final version at the end of this tutorial so don‚Äôt worry.</p><div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>(<span class="op">...</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>cities<span class="op">.</span><span class="fu">forEach</span>(<span class="kw">function</span>(city) {</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> adGroupOperation <span class="op">=</span> adGroupBuilder</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withName</span>(city<span class="op">.</span><span class="fu">toLowerCase</span>()<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/ /g</span><span class="op">,</span> <span class="st">&#39;_&#39;</span>))</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withStatus</span>(<span class="st">&#39;PAUSED&#39;</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">build</span>()<span class="op">;</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> adGroup <span class="op">=</span> adGroupOperation<span class="op">.</span><span class="fu">getResult</span>()<span class="op">;</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> keywords <span class="op">=</span> [</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;bike repair &#39;</span> <span class="op">+</span> city<span class="op">,</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;bike repair shop &#39;</span> <span class="op">+</span> city<span class="op">,</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;bike shop &#39;</span> <span class="op">+</span> city</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  keywords<span class="op">.</span><span class="fu">forEach</span>(<span class="kw">function</span>(keyword) {</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    adGroup<span class="op">.</span><span class="fu">newKeywordBuilder</span>()</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withText</span>(<span class="st">&#39;+&#39;</span> <span class="op">+</span> keyword<span class="op">.</span><span class="fu">toLowerCase</span>()<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/ /g</span><span class="op">,</span> <span class="st">&#39; +&#39;</span>))</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withCpc</span>(<span class="fl">1.5</span>) <span class="co">// $/‚Ç¨/¬£1.50 bid as a placeholder</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withFinalUrl</span>(<span class="st">&#39;https://www.example.com&#39;</span>)</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">build</span>()<span class="op">;</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>(<span class="op">...</span>)</span></code></pre></div><p>Now take a look at the preview results.</p><figure><img src="/images/kw_builder_preview.png" alt="keyword builder preview"><figcaption aria-hidden="true">keyword builder preview</figcaption></figure><h2 id="section-1">üòç</h2><p>Improvements on this part of the script would be to include more keywords (like ‚Äúbicycle shop‚Äù instead of only ‚Äúbike shop‚Äù) as well as adding phrase match keywords &amp; exact match keywords but you should be able to figure it out üòâ. Remember that Google Ads can infer the match type through the keyword text, for example: <code>"bike repair shop chicago"</code> is a phrase match keyword and <code>[bike repair shop chicago]</code> is an exact match keyword so you only need to prepend and append either double quotes or square brackets around our keyword text template and that‚Äôs it!</p><h2 id="every-ad-campaign-needs-expanded-text-ads">Every ad campaign needs‚Ä¶ Expanded Text Ads</h2><p>You know the drill now! Expanded text ads have their own builder:</p><div class="sourceCode" id="cb7"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a> <span class="kw">var</span> adOperation <span class="op">=</span> adGroup<span class="op">.</span><span class="fu">newAd</span>()<span class="op">.</span><span class="fu">expandedTextAdBuilder</span>()</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withHeadlinePart1</span>(<span class="st">&#39;First ad headline&#39;</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withHeadlinePart2</span>(<span class="st">&#39;Second ad headline&#39;</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withDescription</span>(<span class="st">&#39;Ad description&#39;</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withPath1</span>(<span class="st">&#39;path1&#39;</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withPath2</span>(<span class="st">&#39;path2&#39;</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">withFinalUrl</span>(<span class="st">&#39;https://www.example.com&#39;</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">build</span>()<span class="op">;</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a> <span class="kw">var</span> ad <span class="op">=</span> adOperation<span class="op">.</span><span class="fu">getResult</span>()<span class="op">;</span></span></code></pre></div><p>Some stuff to keep in mind: - Each headline has a 30 characters limit - Description line has a 80 characters limit</p><p>After some customization, this is what our final script looks like:</p><div class="sourceCode" id="cb8"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">main</span>() {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> campaign <span class="op">=</span> AdsApp<span class="op">.</span><span class="fu">campaigns</span>()</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withCondition</span>(<span class="st">&quot;Name = &#39;united_states-cities&#39;&quot;</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withLimit</span>(<span class="dv">1</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">get</span>()</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">next</span>()<span class="op">;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> adGroupBuilder <span class="op">=</span> campaign<span class="op">.</span><span class="fu">newAdGroupBuilder</span>()<span class="op">;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> cities <span class="op">=</span> [</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;New York City&#39;</span><span class="op">,</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Los Angeles&#39;</span><span class="op">,</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Chicago&#39;</span><span class="op">,</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Houston&#39;</span><span class="op">,</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Philadelphia&#39;</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>  cities<span class="op">.</span><span class="fu">forEach</span>(<span class="kw">function</span>(city) {</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> adGroupOperation <span class="op">=</span> adGroupBuilder</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withName</span>(city<span class="op">.</span><span class="fu">toLowerCase</span>()<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/ /g</span><span class="op">,</span> <span class="st">&#39;_&#39;</span>))</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withStatus</span>(<span class="st">&#39;PAUSED&#39;</span>)</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">build</span>()<span class="op">;</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> adGroup <span class="op">=</span> adGroupOperation<span class="op">.</span><span class="fu">getResult</span>()<span class="op">;</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> keywords <span class="op">=</span> [</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>      <span class="st">&#39;bike repair &#39;</span> <span class="op">+</span> city<span class="op">,</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>      <span class="st">&#39;bike repair shop &#39;</span> <span class="op">+</span> city<span class="op">,</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>      <span class="st">&#39;bike shop &#39;</span> <span class="op">+</span> city</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">;</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>    keywords<span class="op">.</span><span class="fu">forEach</span>(<span class="kw">function</span>(keyword) {</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>      adGroup<span class="op">.</span><span class="fu">newKeywordBuilder</span>()</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">withText</span>(<span class="st">&#39;+&#39;</span> <span class="op">+</span> keyword<span class="op">.</span><span class="fu">toLowerCase</span>()<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/ /g</span><span class="op">,</span> <span class="st">&#39; +&#39;</span>))</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">withCpc</span>(<span class="fl">1.5</span>)</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">withFinalUrl</span>(<span class="st">&#39;https://www.example.com&#39;</span>)</span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">build</span>()<span class="op">;</span></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>    adGroup<span class="op">.</span><span class="fu">newAd</span>()<span class="op">.</span><span class="fu">expandedTextAdBuilder</span>()</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withHeadlinePart1</span>(city <span class="op">+</span> <span class="st">&#39; Bike Repair Shop&#39;</span>)</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withHeadlinePart2</span>(<span class="st">&#39;Fast &amp; professional&#39;</span>)</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withDescription</span>(<span class="st">&#39;Repair Your Bike Here &amp; Buy Accessories. &#39;</span> <span class="op">+</span></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>                       <span class="st">&#39;Book Your Appointment Now!&#39;</span>)</span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withPath1</span>(<span class="st">&#39;bike-repair&#39;</span>)</span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withPath2</span>(city<span class="op">.</span><span class="fu">toLowerCase</span>()<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/ /g</span><span class="op">,</span> <span class="st">&#39;_&#39;</span>))</span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">withFinalUrl</span>(<span class="st">&#39;https://www.example.com&#39;</span>)</span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">build</span>()</span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><p>Go ahead and run it after making sure no errors occur during the preview.</p><h2 id="results">Results</h2><h3 id="keywords-list">Keywords list:</h3><figure><img src="/images/keywords_result.png" alt="keywords result"><figcaption aria-hidden="true">keywords result</figcaption></figure><h3 id="ads-list">Ads list:</h3><figure><img src="/images/ads_result.png" alt="ads_result.png"><figcaption aria-hidden="true">ads_result.png</figcaption></figure><p>Pretty amazing that we created these ads automatically. It would be little to no effort to scale them to include any number of cities! Last step is to unpause your ad groups whenever you‚Äôre ready to launch üöÄ.</p></div></body></html>